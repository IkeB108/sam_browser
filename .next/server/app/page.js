(()=>{var e={};e.id=974,e.ids=[974],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5470:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=n(6186),o=n(6557),s=n(6437),i=n.n(s),l=n(4842),a={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);n.d(t,a);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,2202)),"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,8067)),"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,571,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,1430,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,5055,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js"],u={require:n,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8421:(e,t,n)=>{Promise.resolve().then(n.bind(n,2202))},1573:(e,t,n)=>{Promise.resolve().then(n.bind(n,3967))},7873:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6093,23)),Promise.resolve().then(n.t.bind(n,1101,23)),Promise.resolve().then(n.t.bind(n,6437,23)),Promise.resolve().then(n.t.bind(n,5364,23)),Promise.resolve().then(n.t.bind(n,956,23)),Promise.resolve().then(n.t.bind(n,3896,23)),Promise.resolve().then(n.t.bind(n,5567,23))},7201:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6417,23)),Promise.resolve().then(n.t.bind(n,3609,23)),Promise.resolve().then(n.t.bind(n,5678,23)),Promise.resolve().then(n.t.bind(n,7312,23)),Promise.resolve().then(n.t.bind(n,2608,23)),Promise.resolve().then(n.t.bind(n,7204,23)),Promise.resolve().then(n.t.bind(n,2019,23))},9457:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6604,23))},2609:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2288,23))},3967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calcUserHasPinchZoomed:()=>eb,default:()=>eS,useSessionStateStore:()=>ex,useUserSettingsStore:()=>ef,worksheets:()=>b});var r=n(5422),o=n(719),s=n.n(o);let i=e=>{let t;let n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,s={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,o,s);return s},l=e=>e?i(e):i,a=e=>e,d=e=>{let t=l(e),n=e=>(function(e,t=a){let n=o.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return o.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},c=e=>e?d(e):d;function u(e){let t=e.isShort?"10px":"14px",n={borderRadius:"200px",paddingTop:t,paddingBottom:t,paddingLeft:"24px",paddingRight:"24px",display:"flex",alignItems:"center",justifyContent:"center",border:e.isFilled?"none":"1px solid #3d3d3d",backgroundColor:e.isFilled?f.purpleColor:"white",color:e.isFilled?"white":"#3d3d3d",fontFamily:"Roboto, sans-serif",fontWeight:500,fontSize:"16px",cursor:"pointer",userSelect:"none"};e.additionalStyleObject&&Object.assign(n,e.additionalStyleObject);let o={...e};return(delete o.functionToTrigger,delete o.isFilled,delete o.isShort,delete o.additionalStyleObject,delete o.useOnClick,e.useOnClick)?(0,r.jsx)("button",{style:n,onClick:e.functionToTrigger,...o,children:e.children}):e.useOnClick?void 0:(0,r.jsx)(h,{style:n,functionToTrigger:e.functionToTrigger,...o,children:e.children})}function p({buttonWidthString:e,iconWidthString:t,color:n,onClickFunction:o,additionalStyleObject:s}){let i={background:"none",border:"none",cursor:"pointer",padding:"0px",verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"};e&&(i.width=e,i.height=e),s&&Object.assign(i,s);let l=null;return t&&(l={width:t,height:t}),(0,r.jsx)("button",{style:i,onClick:o,children:(0,r.jsx)("img",{src:`${f.iconsFolderPath}/close_${n}.svg`,alt:"Close",style:l})})}function g({refSetting:e,widthSetting:t,heightSetting:n,children:o,additionalStyleObject:s,blockBehind:i}){let l={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:t,height:n,backgroundColor:"white",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.45)",zIndex:3,overflow:"auto",padding:"20px",borderRadius:"24px"};return(s&&Object.assign(l,s),i)?i?(0,r.jsx)("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#00000055",zIndex:"3"},children:(0,r.jsx)("div",{ref:e||null,style:l,children:o})}):void 0:(0,r.jsx)("div",{ref:e||null,style:l,children:o})}function h(e){let t=(0,o.useRef)(null);e.functionToTrigger||console.error("PressDownButton requires a functionToTrigger prop"),e.onClick&&console.warn("PressDownButton is not meant to use onClick prop");let n={...e};return delete n.functionToTrigger,(0,r.jsxs)("button",{ref:t,...n,children:[" ",e.children," "]})}let x="/sam_browser/out",f={softBorderColor:"#A9A09E",redColor:"#C56D61",purpleColor:"#55587B",nearBlackColor:"#3d3d3d",worksheetSelectionPanelWidth:"200px",colorMap:{red:"#BD1452",orange:"#FE9350",yellow:"#FFFB79",green:"#91D480",cyan:"#70D9FF",blue:"#2D4CA8",purple:"#8B2F99",pink:"#FF9FDC"},getGenericButtonStyle:function(e){return{padding:"10px",borderRadius:"8px",cursor:"pointer",borderColor:"black",borderStyle:"solid",...{primary:{backgroundColor:"black",color:"white",border:"none"},secondary:{backgroundColor:"white",color:"black"},tertiary:{backgroundColor:"transparent",color:"black",border:"none"}}[e]}},useBasePath:!0,basePathToUse:x,webWorkersFolderPath:x+"/web_workers_for_ws_images",iconsFolderPath:x+"/icons",idbDatabaseVersion:1};f.basePathToUse;let b={};function S(e){let t=f.idbDatabaseVersion,n=indexedDB.open("worksheetDatabase",t);n.onupgradeneeded=function(e){e.target.result.createObjectStore("allWorksheets")},n.onsuccess=async function(t){t.target.result.transaction("allWorksheets","readonly").objectStore("allWorksheets").get(e).onsuccess=async function(t){let n=t.target.result;void 0!==n?n.hasOwnProperty("pageBlobs")?(console.log("found worksheet with pageblobs "+e),b[e]=n,U.setState({timeOfLastWorksheetAdd:Date.now()})):console.log("found worksheet but no pageblobs"):console.log("Worksheet not found in IDB:",e)}}}let m=c(e=>({aWorksheetProcessIsBusy:!1,updateValue:t=>{e(()=>({aWorksheetProcessIsBusy:t}))}})),w=c(e=>({statusMessage:"",setStatusMessage:t=>{e(()=>({statusMessage:t}))}})),y=c(e=>({userHasPinchZoomed:!1,setUserHasPinchZoomed:t=>{e(()=>({userHasPinchZoomed:t}))}})),k=c(e=>({userJustClickedMove:!1})),j=c(e=>({addWorksheetModalIsOpen:!1,setAddWorksheetModalIsOpen:t=>{e(()=>({addWorksheetModalIsOpen:t}))},indexOfStudentAddingFor:null,setIndexOfStudentAddingFor:t=>{e(()=>({indexOfStudentAddingFor:t}))}})),v=c(e=>({searchInputValue:"",setSearchInputValue:t=>{["a","b","c","1","2","3","4","5","6"].includes(t.toLowerCase())&&(t="0"+t),e({searchInputValue:t});let n={0:0,"0a":0,"0b":0,"0c":0,"01":1,"02":2,"03":3,"04":4,"05":5,"06":6};if(t.length>=2)I.getState().setSearchResults(R(t));else if("0"==t){let e=[...R("0a"),...R("0b"),...R("0c")];I.getState().setSearchResults(e)}else I.getState().setSearchResults([]);if(W.getState().setHighlightedResultIndex(0),"0"==t){C.getState().setSelectedLevelInteger("0");return}if(t.length>=2){let e=t.slice(0,2).toLowerCase();if(n.hasOwnProperty(e)){C.getState().setSelectedLevelInteger(n[e]);return}}"0"!==t&&C.getState().setSelectedLevelInteger("All")}})),C=c(e=>({selectedLevelInteger:"All",setSelectedLevelInteger:t=>e({selectedLevelInteger:t})})),I=c(e=>({searchResults:[],setSearchResults:t=>{e({searchResults:t}),e({resultElementRefs:[]})},resultElementRefs:[],setResultElementRefs:t=>e({resultElementRefs:t})})),W=c(e=>({highlightedResultIndex:0,setHighlightedResultIndex:t=>{e({highlightedResultIndex:t});let{resultElementRefs:n}=I.getState();n.length>0&&n[t].scrollIntoView({behavior:"instant",block:"nearest"})}}));function P(){let{indexOfStudentAddingFor:e}=j.getState(),{openStudents:t}=ex.getState(),n=t[e].name;return(0,r.jsxs)(g,{blockBehind:!0,widthSetting:"96%",heightSetting:"96%",additionalStyleObject:{boxSizing:"border-box",display:"flex",flexDirection:"column",maxWidth:"1000px",maxHeight:"700px"},children:[(0,r.jsxs)("div",{width:"100%",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[" ",(0,r.jsxs)("h1",{style:{fontFamily:"Roboto, sans-serif",fontSize:"18px",fontWeight:"normal",margin:"0"},children:["Add Worksheet for ",n]}),(0,r.jsx)(p,{buttonWidthString:"37px",iconWidthString:"22px",color:"black",onClickFunction:function(){j.getState().setAddWorksheetModalIsOpen(!1)},additionalStyleObject:{top:"10px",right:"10px"}})]}),(0,r.jsxs)("div",{style:{display:"flex",height:"100%"},children:[" ",(0,r.jsxs)("div",{style:{flexGrow:"1",boxSizing:"border-box",marginRight:"20px",display:"flex",flexDirection:"column",height:"100%",containerType:"size"},children:[(0,r.jsx)(D,{}),(0,r.jsx)(_,{}),(0,r.jsx)(O,{})]}),(0,r.jsx)(F,{})]})]})}function O(){let{searchResults:e}=I(),{highlightedResultIndex:t}=W(),n={width:"100%",padding:"10px 0px",borderBottom:"1px solid #D1C7C5",cursor:"pointer"},o={backgroundColor:"#EAE4D4",borderBottom:"1px solid #EAE4D4"};o={...o,...n};let s={borderTop:"1px solid #D1C7C5"};s={...s,...n};let i=e=>e==t?o:0==e?s:n,l=function(t){B(e[t],!0)},a=e=>{if(null==e)return;let{resultElementRefs:t}=I.getState();t.push(e)},d={overflowY:"auto",height:"100%",boxSizing:"border-box",marginTop:"20px"};return 0==e.length&&(d.alignContent="center",d.alignSelf="center"),(0,r.jsxs)("div",{style:d,children:[0==e.length?(0,r.jsx)("img",{src:f.iconsFolderPath+"/inputInstructions.svg",alt:"Input instructions: For book 3.24 DWR 1-3, enter 3.24, skip DWR, and enter 1-3",style:{width:"120px"}}):null,e.map((e,t)=>(0,r.jsx)("div",{onClick:()=>{l(t)},style:i(t),ref:a,children:e},t))]})}function D(){let{searchInputValue:e}=v();return(0,r.jsxs)("div",{style:{width:"100%",height:"50px",flexShrink:"0",border:"1px solid #A9A09E",borderRadius:"200px",boxSizing:"border-box",marginTop:"20px",overflow:"hidden",display:"flex"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Search a worksheet ID...",style:{color:"#3d3d3d",fontFamily:"Roboto, sans-serif",fontSize:"16px",width:"100%",height:"100%",border:"none",padding:"17px 24px",boxSizing:"border-box",outline:"none"},value:e,onChange:e=>{let t=e.target.value;v.getState().setSearchInputValue(t)},id:"searchInput",autoComplete:"off"}),(0,r.jsx)(p,{iconWidthString:"14px",color:"black",onClickFunction:function(){let{setSearchInputValue:e}=v.getState();e("")},additionalStyleObject:{width:60,height:"100%"}})]})}function _(){return(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"20px",flexWrap:"wrap"},children:[(0,r.jsx)(A,{levelInteger:"All"}),(0,r.jsx)(A,{levelInteger:"0"}),(0,r.jsx)(A,{levelInteger:"1"}),(0,r.jsx)(A,{levelInteger:"2"}),(0,r.jsx)(A,{levelInteger:"3"}),(0,r.jsx)(A,{levelInteger:"4"}),(0,r.jsx)(A,{levelInteger:"5"}),(0,r.jsx)(A,{levelInteger:"6"})]})}function A({levelInteger:e}){let{selectedLevelInteger:t}=C(),n="Lvl "+e;"All"==e&&(n="All");let o={padding:"8px 12px",margin:"0",border:"2px solid #DAD6D5",fontWeight:"normal",fontSize:"16px"};return t==e&&(o.backgroundColor="#E6E6EB"),(0,r.jsx)(u,{isFilled:!1,isShort:!0,additionalStyleObject:o,functionToTrigger:()=>{C.getState().setSelectedLevelInteger(e),"All"==e?v.getState().setSearchInputValue(""):"0"==e?v.getState().setSearchInputValue("0"):v.getState().setSearchInputValue("0"+e)},children:n})}function T({val:e}){let t;let n={backgroundColor:"white",border:"1px solid #DAD6D5",boxShadow:"0px 1px 4px #0000001a",width:"50px",height:"50px",color:"#3D3D3D",borderRadius:"7px",fontFamily:"Roboto, sans-serif",fontSize:"30px",display:"flex",alignItems:"center",justifyContent:"center"},o=function(e){if("clear"==e){v.getState().setSearchInputValue("");return}if("backspace"==e){let{searchInputValue:e,setSearchInputValue:t}=v.getState();t(e.slice(0,-1));return}if("open"==e){(function(){let{searchResults:e}=I.getState();if(0==e.length)return;let{highlightedResultIndex:t}=W.getState();B(e[t],!0)})();return}let t=v.getState().searchInputValue;v.getState().setSearchInputValue(t+e)},s={width:"55px",height:"55px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:"white",border:"none",padding:"0px",userSelect:"none"};"backspace"==e?t=(0,r.jsx)("img",{src:f.iconsFolderPath+"/backspace.svg",alt:"Backspace",style:{width:"26px",height:"26px"}}):"clear"==e?(t="Clear",n.backgroundColor=f.redColor,n.color="white",n.fontSize="20px"):"open"==e?(t="Open",s.width="100px",n.width="100%",n.backgroundColor="#eae4d444",n.border="1px solid rgb(204, 194, 166)",n.fontSize="20px"):t=e;let i=!1;return"open"==e&&(i=0==I().searchResults.length),i&&(n.backgroundColor="#EBEBEB",n.border="none",n.color="#8c8c8c",s.cursor="not-allowed"),(0,r.jsx)(h,{style:s,functionToTrigger:()=>{o(e)},disabled:i,children:(0,r.jsx)("div",{style:n,children:t})})}function F(){let e={display:"flex",justifyContent:"center"};return(0,r.jsxs)("div",{style:{margin:"auto 0",justifyItems:"center"},children:[(0,r.jsxs)("div",{style:e,children:[(0,r.jsx)(T,{val:"A"}),(0,r.jsx)(T,{val:"B"}),(0,r.jsx)(T,{val:"C"})]}),(0,r.jsxs)("div",{style:e,children:[(0,r.jsx)(T,{val:"1"}),(0,r.jsx)(T,{val:"2"}),(0,r.jsx)(T,{val:"3"})]}),(0,r.jsxs)("div",{style:e,children:[(0,r.jsx)(T,{val:"4"}),(0,r.jsx)(T,{val:"5"}),(0,r.jsx)(T,{val:"6"})]}),(0,r.jsxs)("div",{style:e,children:[(0,r.jsx)(T,{val:"7"}),(0,r.jsx)(T,{val:"8"}),(0,r.jsx)(T,{val:"9"})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px"},children:[(0,r.jsx)(T,{val:"backspace"}),(0,r.jsx)(T,{val:"0"}),(0,r.jsx)(T,{val:"clear"})]}),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(T,{val:"open"})})]})}function R(e){let t=e.toUpperCase().replace(/[^0-9A-Z]/gi,"");if(t.length<2)return[];let n=t.toUpperCase().slice(0,2).replace(/[^0-9ABC]/gi,"")+t.toUpperCase().slice(2).replace(/[^0-9]/gi,""),r=e.toUpperCase().replace(/[^A-Z]/gi,""),o=[],s=(e,t)=>{if(e.includes("(OLD)")&&!t.includes("(OLD)"))return 1;if(!e.includes("(OLD)")&&t.includes("(OLD)"))return -1;let n=e.toUpperCase().replace(/[^A-Z]/gi,"").includes(r),o=t.toUpperCase().replace(/[^A-Z]/gi,"").includes(r);return n&&!o?-1:!n&&o||e.includes("(USA)")&&!t.includes("(USA)")?1:!e.includes("(USA)")&&t.includes("(USA)")?-1:0};worksheets.integerMap[n]&&(o=worksheets.integerMap[n]),o.sort(s);let i=[];for(let e in worksheets.integerMap)e.startsWith(n)&&worksheets.integerMap[e].forEach(e=>{o.includes(e)||i.push(e)});return i.sort(s),[...o,...i]}function B(e,t){let n;let{indexOfStudentAddingFor:r}=j.getState(),{openStudents:o,setCurrentPageOfWorksheet:s,setCurrentWorksheet:i}=ex.getState(),l=o[r],a=function(e,t){for(let n in t)if(t[n].id==e)return n;return null}(e,l.openWorksheets),d=null;null==a?(d="single"==ef.getState().pageView?1:0,l.openWorksheets.push({id:e,pageLeftOff:d,notes:""}),n=l.openWorksheets.length-1):n=a,i(r,n),null!==d&&s(d),t&&j.getState().setAddWorksheetModalIsOpen(!1)}let z=c(e=>({isFullscreen:!1})),L=c(e=>({pagesAreHidden:!1,setPagesAreHidden:t=>e({pagesAreHidden:t})})),M=c(e=>({userIsDraggingPages:!1,touchStartX:null,currentPageOnTouchStart:null,currentGestureIncludesMultitouch:!1})),U=c(e=>({timeOfLastWorksheetAdd:null}));function E(){let e=m().aWorksheetProcessIsBusy,t=w().statusMessage,{pageView:n}=ef(),o=null,s={width:"100%",height:"100%",containerType:"size",boxSizing:"border-box",display:"flex"};return e?o=(0,r.jsx)("div",{id:"wrapper-for-both-pages",style:s,children:(0,r.jsx)("p",{style:{height:"30px"},children:t})}):("double"==n&&(o=(0,r.jsxs)("div",{id:"wrapper-for-both-pages",style:s,children:[(0,r.jsx)("div",{id:"wrapper-for-single-page",style:{position:"relative",width:"50%",height:"100%"},children:(0,r.jsx)(H,{isLeftOrRight:"left"})}),(0,r.jsx)("div",{id:"wrapper-for-single-page",style:{position:"relative",width:"50%",height:"100%"},children:(0,r.jsx)(H,{isLeftOrRight:"right"})})]})),"single"==n&&(o=(0,r.jsx)("div",{id:"wrapper-for-both-pages",style:s,children:(0,r.jsx)("div",{id:"wrapper-for-single-page",style:{position:"relative",width:"100%",height:"100%"},children:(0,r.jsx)(H,{isLeftOrRight:"left"})})}))),(0,r.jsxs)("div",{style:{flexGrow:1,flexBasis:"0%",height:"100%",padding:"16px",paddingRight:"8px",boxSizing:"border-box",display:"flex",flexDirection:"column",containerType:"size"},children:[o,(0,r.jsx)(N,{})]})}function V(e){let{currentPageOfWorksheet:t,setCurrentPageOfWorksheet:n,getCurrentWorksheetID:r}=ex.getState();if(null==r())return;let{pageView:o}=ef.getState(),s="single"==o?1:2,i=r();if(void 0===b[i])return;let l=t;"prev"==e&&(l-=s),"next"==e&&(l+=s);let a="single"==o?1:0,d=b[i].pageCount;"double"==o&&d%2==1&&(d-=1),l<a&&(l=a),l>d&&(l=d),n(l)}function N(){let{isFullscreen:e}=z(),{pageView:t}=ef(),n=f.iconsFolderPath+("single"==t?"/single_page_view.svg":"/two_page_view.svg"),o=(0,r.jsx)(u,{isFilled:!0,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 24px)",paddingRight:"min(1.5vw, 24px)",minWidth:"45px"},functionToTrigger:function(){let{pageView:e,setPageView:t}=ef.getState(),n="double"==e?"single":"double";t(n);let{currentPageOfWorksheet:r,setCurrentPageOfWorksheet:o}=ex.getState(),s=r;"single"==n&&0==s&&(s=1),"double"==n&&s%2==1&&s--,o(s)},children:(0,r.jsx)("img",{src:n,alt:"Toggle Page View"})}),s=(0,r.jsxs)(u,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 24px)",paddingRight:"min(1.5vw, 24px)"},functionToTrigger:eo,useOnClick:!0,children:[(0,r.jsx)("p",{style:{margin:"0",padding:"0",marginRight:"10px",fontSize:"min(1.6vw, 16px)",textWrap:"nowrap"},children:"Move"}),(0,r.jsx)("img",{src:f.iconsFolderPath+"/move.svg",alt:"Move",style:{width:"19px",height:"15px"}})]});()=>{console.log("log worksheet button clicked")},f.iconsFolderPath;let{pagesAreHidden:i}=L(),l=(0,r.jsx)(u,{isFilled:!0,isShort:!0,additionalStyleObject:{paddingLeft:"min(2vw, 30px)",paddingRight:"min(2vw, 30px)"},functionToTrigger:function(){let{pagesAreHidden:e,setPagesAreHidden:t}=L.getState();t(!e)},children:i?(0,r.jsx)("img",{id:"toggle-hidden",src:f.iconsFolderPath+"/hidden.svg",alt:"Toggle visibility"}):(0,r.jsx)("img",{id:"toggle-visible",src:f.iconsFolderPath+"/visible.svg",alt:"Toggle visibility"})}),a=(0,r.jsx)(u,{isFilled:!0,isShort:!0,additionalStyleObject:{paddingLeft:"min(2vw, 30px)",paddingRight:"min(2vw, 30px)"},functionToTrigger:()=>{document.fullscreenElement?(document.exitFullscreen(),z.setState({isFullscreen:!1})):(document.body.requestFullscreen(),z.setState({isFullscreen:!0}))},children:e?(0,r.jsx)("img",{src:f.iconsFolderPath+"/fullscreen_exit.svg",alt:"Toggle Fullscreen"}):(0,r.jsx)("img",{src:f.iconsFolderPath+"/fullscreen.svg",alt:"Toggle Fullscreen"})}),d=(0,r.jsx)(u,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(2vw, 30px)",paddingRight:"min(2vw, 30px)",zIndex:"2"},functionToTrigger:()=>{V("prev")},children:(0,r.jsx)("img",{src:f.iconsFolderPath+"/arrow_left.svg",alt:"Previous Page",style:{width:"15px",height:"20px"}})}),c=(0,r.jsx)(u,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(2vw, 30px)",paddingRight:"min(2vw, 30px)",zIndex:"2"},functionToTrigger:()=>{V("next")},children:(0,r.jsx)("img",{src:f.iconsFolderPath+"/arrow_right.svg",alt:"Next Page",style:{width:"15px",height:"20px"}})});return(0,r.jsxs)("div",{style:{paddingTop:"16px",display:"flex"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",flexGrow:1,marginRight:"8px"},children:[a,o,l,s,(0,r.jsx)(q,{})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[d,c]})]})}function q(){let e=ex(e=>e.currentWorksheet),t=ex(e=>e.openStudents),n=ex(e=>e.getCurrentWorksheetID)();if(null==n)return null;let o=t[e.openStudentIndex].openWorksheets[e.worksheetIndex].notes;return(0,r.jsx)("input",{type:"text",style:{width:"100%",maxWidth:"500px",height:"100%",border:"1px solid #A9A09E",borderRadius:"8px",boxSizing:"border-box",resize:"none",fontSize:"12px",fontFamily:"Roboto, sans-serif",padding:"12px"},placeholder:`Notes for ${n}...`,value:o,onChange:function(n){let r=[...t];r[e.openStudentIndex].openWorksheets[e.worksheetIndex].notes=n.target.value,ex.getState().setOpenStudents(r)},onKeyDown:function(e){"Enter"==e.key&&document.getElementById("notes-about-worksheet-text-area").blur()},id:"notes-about-worksheet-text-area",autoComplete:"off"})}function H({isLeftOrRight:e}){U();let t=(0,o.useRef)(null),n=y(e=>e.userHasPinchZoomed),s=L(e=>e.pagesAreHidden),i=ex(e=>e.currentWorksheet),l=M(e=>e.currentGestureIncludesMultitouch),a=!n&&!s&&null!=i.worksheetIndex&&!l,{currentPageOfWorksheet:d,getCurrentWorksheetID:c}=ex(),u="left"==e?d:d+1,p=null,g=c();return g&&(ex.getState().usePlaceholderImages?p="use_placeholder_images":b[g]&&b[g].pageBlobs?b[g].pageBlobs[u]&&(p=b[g].pageBlobs[u]):p="worksheet_not_available"),(0,r.jsxs)("div",{style:{position:"absolute",inset:0,marginLeft:"auto",maxHeight:"100%",aspectRatio:"496 / 702",cursor:a?"ew-resize":"default",userSelect:"none"},ref:t,children:[(0,r.jsx)(Z,{pageImageBlob:p,pageNumber:u}),(0,r.jsx)(G,{isLeftOrRight:e,pageNumber:u,pageExists:null===p})]})}function G({isLeftOrRight:e,pageNumber:t,pageExists:n}){let o={position:"absolute",bottom:"15px",width:"38px",height:"38px",backgroundColor:"white",borderRadius:"4px",border:"1px solid #3D3D3D",justifyContent:"center",alignItems:"center",fontSize:"18px",display:n?"none":"flex"};return o[e]="15px",(0,r.jsx)("div",{style:o,children:t})}function Z({pageImageBlob:e,pageNumber:t}){let n;let o={width:"100%",height:"100%",border:"1px solid #A9A09E",borderRadius:"12px",backgroundColor:"white",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",boxSizing:"border-box"},{pagesAreHidden:s}=L();return null===e||s||"worksheet_not_available"===e||0===t?(0,r.jsx)("div",{style:o}):(n="use_placeholder_images"==e?(f.useBasePath?f.basePathToUse:"")+`/placeholder_images/placeholder_image_${(t-1)%5+1}.webp`:URL.createObjectURL(e),(0,r.jsx)("img",{src:n,style:o,draggable:!1,onDragStart:e=>e.preventDefault()}))}function $(){let e={width:f.worksheetSelectionPanelWidth,height:"100%",padding:"16px",paddingLeft:"8px",boxSizing:"border-box",overflowY:"scroll",containerType:"size"},t=ex().openStudents;return(0,r.jsxs)("div",{style:{height:"100%",flexGrow:0,flexBasis:"0%",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)("div",{style:e,children:[t.map((e,t)=>(0,r.jsx)(J,{index:t},t)),(0,r.jsx)(ei,{})]}),(0,r.jsx)(K,{})]})}function K(){let e=(0,r.jsx)(u,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 30px)",paddingRight:"min(1.5vw, 30px)"},functionToTrigger:()=>{ex.getState().setCurrentPage("SettingsPage")},children:(0,r.jsx)("img",{src:f.iconsFolderPath+"/settings.svg",alt:"Settings",style:{width:"23px",height:"23px"}})});return(0,r.jsx)("div",{style:{paddingTop:"16px",display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"16px",marginRight:"16px",borderTop:"1px solid #A9A09E"},children:e})}function J({index:e}){let t=ex(e=>e.openStudents)[e],n="other"==t.type,o={width:"100%",backgroundColor:"white",borderRadius:"12px",boxShadow:"0px 1px 2px rgba(0, 0, 0, 0.45)",boxSizing:"border-box",marginBottom:"12px",overflow:"hidden",position:"relative"};return"other"==t.type&&(o.border="1px solid #eeeeee"),(0,r.jsxs)("div",{style:o,children:[(0,r.jsx)(Y,{index:e,studentName:t.name}),(0,r.jsx)(en,{index:e}),(0,r.jsx)(X,{index:e,studentIsOther:n})]})}function Y({studentName:e,index:t}){let{userIsMovingCurrentWorksheet:n,openStudents:o,currentWorksheet:s}=ex.getState(),i=ef(e=>e.madisonMode),l=o[t],a={display:"flex",alignItems:"center",backgroundColor:i?"#1ab0cb":f.redColor,padding:"6px 10px","--original-bg-color":f.redColor,"--pulsate-bg-color":"#eb9286"};n&&(a.cursor="pointer");let d={margin:0,whiteSpace:"nowrap",color:"white",fontWeight:"normal",fontSize:"12px",userSelect:"none",cursor:"pointer",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},c={width:"18px",height:"18px",borderRadius:"50%",backgroundColor:f.colorMap[l.color],marginRight:"10px"};"other"==l.type&&(c.backgroundColor="#00000000",a.backgroundColor="white",a.padding="10px 10px",a["--original-bg-color"]="rgb(223, 223, 223)",a["--pulsate-bg-color"]="white",d.color="black",delete d.cursor);let u=(0,r.jsx)(p,{buttonWidthString:"24px",iconWidthString:"14px",color:"white",onClickFunction:()=>{if(confirm("Remove "+l.name+" from the session?")){let{deleteOpenStudent:e}=ex.getState();e(t)}}}),g=o[t].notesCopied,h=(0,r.jsx)(et,{index:t,hasCopied:g});return"other"==l.type&&(u=(0,r.jsx)(Q,{index:t})),n&&(u=(0,r.jsx)("div",{style:{width:"24px",height:"24px"}}),h=(0,r.jsx)("div",{style:{width:"24px",height:"24px"}})),"other"==l.type&&(h=null),(0,r.jsxs)("div",{style:a,className:n?"pulsatingHeader":null,onClick:n?function(){let{setOpenStudents:e,setCurrentWorksheet:n}=ex.getState();if(t!==s.openStudentIndex){let r=[...o];r[t].openWorksheets.push(o[s.openStudentIndex].openWorksheets[s.worksheetIndex]),o[s.openStudentIndex].openWorksheets.splice(s.worksheetIndex,1),e(r),n(t,r[t].openWorksheets.length-1)}}:null,children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,containerType:"size"},className:"left-container-for-student-header",children:[h,(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:d,onClick:"other"==l.type?null:function(){if(ex.getState().userIsMovingCurrentWorksheet)return;let e=prompt(`Enter new name for ${l.name}:`);if(null!==e&&e.trim().length>0){let n=[...o];n[t].name=e,ex.getState().setOpenStudents(n)}},children:e}),g?(0,r.jsx)("p",{style:{margin:"0",fontSize:"12px",color:"#ffd3d3"},children:"Copied"}):null]})]}),(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:u})]})}function X({index:e,studentIsOther:t}){let n={backgroundColor:"white",border:`2px solid ${f.softBorderColor}`,borderRadius:"50%",cursor:"pointer",width:"40px",height:"40px",verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"center"};return(0,r.jsxs)("div",{style:{padding:"10px 6px",paddingTop:"0px"},children:[(0,r.jsx)(ee,{index:e,studentIsOther:t}),(0,r.jsx)("div",{style:{backgroundColor:"none",justifyContent:"flex-end",alignItems:"center",display:"flex"},children:(0,r.jsx)(es,{styleObject:n,index:e})})]})}function Q({index:e}){return(0,r.jsx)("button",{style:{width:"24px",height:"24px",backgroundColor:"#00000000",border:"none",cursor:"pointer",padding:"0px",verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"},onClick:function(){if(!confirm("Clear all worksheets from 'Other'?"))return;let t=[...ex.getState().openStudents];t[e].openWorksheets=[],ex.getState().setOpenStudents(t),ex.getState().currentWorksheet.openStudentIndex==e&&ex.getState().setCurrentWorksheet(null,null)},children:(0,r.jsx)("img",{src:`${f.iconsFolderPath}/trash.svg`,alt:"Clear",style:{width:"20px"}})})}function ee({index:e,studentIsOther:t}){let n=ex(e=>e.openStudents);return t?null:(0,r.jsx)("textarea",{style:{width:"100%",height:"40px",border:"1px solid #A9A09E",borderRadius:"8px",padding:"4px",boxSizing:"border-box",resize:"none",fontSize:"12px",fontFamily:"Roboto, sans-serif"},placeholder:"Notes...",value:n[e].notes,onChange:function(t){let r=[...n];r[e].notes=t.target.value,ex.getState().setOpenStudents(r)},className:"notes-text-area",onKeyDown:function(e){if("Enter"==e.key){let e=document.getElementsByClassName("notes-text-area");for(let t=0;t<e.length;t++)e[t].blur()}}})}function et({index:e,hasCopied:t}){return(0,r.jsx)("button",{style:{width:"24px",height:"24px",backgroundColor:"#00000000",cursor:"pointer",padding:"0px",verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",marginRight:"5px",border:"none"},onClick:function(){(function(e){let t="",{openStudents:n}=ex.getState(),r=n[e];for(let e=0;e<r.openWorksheets.length;e++){let n=function(e){let t=e.replace(/ WS$/,"").split(" "),n=[],r=[".","-","("],o=["HF","TP"],s=e=>{for(let t in r)if(e.includes(r[t]))return!0;for(let t in o)if(e==o[t])return!0;return!1};for(let e=0;e<t.length;e++){let r=t[e].toUpperCase();s(r)&&("(OLD)"==r&&(r="⌛"),"(USA)"==r&&(r="(usa)"),n.push(r))}return n.join(" ")}(r.openWorksheets[e].id);r.openWorksheets[e].notes.length>0&&(n+=` (${r.openWorksheets[e].notes})`),e>0&&(n="__"+n),t+=n}if(r.notes.length>0&&(t+=`>>${r.notes}`),0==t.length){alert("No data to copy.");return}navigator.clipboard.writeText(t).then(()=>{});let o=[...n];o[e].notesCopied=!0,ex.getState().setOpenStudents(o)})(e)},children:(0,r.jsx)("img",{src:`${f.iconsFolderPath}/${t?"copied.svg":"copy.svg"}`,alt:"Copy",style:{width:t?"16px":"14px"}})})}function en({index:e}){let{openStudents:t,currentWorksheet:n}=ex(),o=t[e],s={display:"flex",flexDirection:"column",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"6px",paddingRight:"6px",overflowY:"auto",height:"100%"};"other"==o.type&&(s.paddingTop="0px");let i=[];for(let t=0;t<o.openWorksheets.length;t++){let s=o.openWorksheets[t].id,l=n.openStudentIndex==e&&n.worksheetIndex==t,a=function(){let{setCurrentWorksheet:n,setUserIsMovingCurrentWorksheet:r,setCurrentPageOfWorksheet:o,openStudents:s}=ex.getState(),{pageView:i}=ef.getState();n(e,t),r(!1);let l=s[e].openWorksheets[t].pageLeftOff;"single"==i&&0==l&&(l=1),"double"==i&&l%2==1&&l--,o(l)};i.push((0,r.jsx)(er,{worksheetID:s,isCurrentWorksheet:l,onClick:a,notes:o.openWorksheets[t].notes},t))}return 0==i.length&&(i="No worksheets open",s.justifyContent="center",s.alignItems="center",s.fontSize="14px",s.color="#A9A09E"),(0,r.jsx)("div",{style:s,children:i})}function er({worksheetID:e,isCurrentWorksheet:t,onClick:n,notes:o}){let s={fontFamily:"Roboto, sans-serif",fontWeight:"normal",fontSize:"12px",border:"none",backgroundColor:"white",padding:"6px",cursor:t?"arrow":"pointer",textAlign:"left",width:"100%",borderRadius:"12px",color:"inherit",boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"center"},i={margin:0,whiteSpace:t?"normal":"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexShrink:1},l={fontSize:"12px",margin:"0",fontStyle:"italic",color:"#858585"},a=e.replace(/( WS|WS)$/,"");return t?(s.backgroundColor="#55587B26",(0,r.jsxs)("div",{style:s,children:[(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("p",{style:i,children:a}),o.length>0?(0,r.jsx)("p",{style:l,children:o}):null]}),(0,r.jsx)("div",{style:{display:"flex"},children:(0,r.jsx)(p,{buttonWidthString:"24px",iconWidthString:"14px",color:"black",onClickFunction:function(){let e=ex.getState().currentWorksheet;ex.getState().openStudents[e.openStudentIndex].openWorksheets.splice(e.worksheetIndex,1),ex.getState().setCurrentWorksheet(null,null),ex.getState().setUserIsMovingCurrentWorksheet(!1)},additionalStyleObject:{flexShrink:0}})})]})):(0,r.jsx)("button",{style:s,onClick:n,children:(0,r.jsxs)("div",{style:{width:"100%"},children:[(0,r.jsx)("p",{style:i,children:a}),o.length>0?(0,r.jsx)("p",{style:l,children:o}):null]})})}function eo(){let{userIsMovingCurrentWorksheet:e,setUserIsMovingCurrentWorksheet:t,setUserCanClickAnywhereToDisableMovingCurrentWorksheet:n,currentWorksheet:r}=ex.getState();null!==r.openStudentIndex&&(e||(n(!0),k.setState({userJustClickedMove:!0}),setTimeout(()=>{k.setState({userJustClickedMove:!1})},100)),t(!e))}function es({styleObject:e,index:t}){return(0,r.jsx)("button",{style:e,onClick:function(){j.getState().setAddWorksheetModalIsOpen(!0),j.getState().setIndexOfStudentAddingFor(t)},children:(0,r.jsx)("img",{src:f.iconsFolderPath+"/add_black.svg",alt:"Add worksheet",style:{width:"16px",height:"16px"}})})}function ei(){return(0,r.jsxs)(u,{useOnClick:!0,isFilled:!0,isShort:!0,functionToTrigger:function(){let{currentWorksheet:e,openStudents:t,numberInNameOfLastStudentAdded:n}=ex.getState(),r=Number(n)+1;r=r.toString(),1==t.length&&(r="1"),ex.setState(e=>({numberInNameOfLastStudentAdded:r})),ex.getState().addOpenStudentToBottom("Student "+r,"green"),e.openStudentIndex==t.length-1&&(ex.getState().setCurrentWorksheet(t.length,0),console.log(t.length-1))},additionalStyleObject:{margin:"0 auto",paddingLeft:"15px",paddingRight:"15px"},id:"add-student-button",children:[(0,r.jsx)("img",{src:f.iconsFolderPath+"/add_white.svg",alt:"Add student",style:{width:"12px",height:"12px",marginRight:"8px"}}),(0,r.jsx)("p",{style:{margin:"0",padding:"0"},children:"Add Student"})]})}function el(e){w.getState().setStatusMessage(e)}function ea(){return(0,r.jsx)(u,{isFilled:!1,functionToTrigger:function(){localStorage.clear(),window.location.reload()},children:"\uD83D\uDD04 Reset Session"})}function ed(){let e=ef(e=>e.madisonMode);return(0,r.jsxs)(u,{isFilled:!1,functionToTrigger:()=>{let e=!ef.getState().madisonMode;ef.getState().setMadisonMode(e)},children:["\uD83D\uDC6D Madison & Yeju Mode: ",e?"ON":"OFF"]})}function ec(){f.getGenericButtonStyle("primary");let e=s().useRef(null),t=m().aWorksheetProcessIsBusy,n=async function(e){if(0===e.target.files.length)return;let t=e.target.files[0];(function(e){for(let t in e){let n=t.split("_-")[0],r=Number(t.split("_-")[1].split(".")[0]);if(b[n])void 0===b[n].pageBlobs&&(b[n].pageBlobs={}),b[n].pageBlobs[r]=e[t].blob;else{let o={};o[r]=e[t].blob,b[n]={pageBlobs:o,is_old:t.includes("(OLD)"),localization:t.includes("(USA)")?"USA":"only",pageCount:"unknown"}}}(function(){for(let e in b)"only"==b[e].localization&&function(e){let t=e.replace(/\D/g,"");for(let e in b){let n=e.replace(/\D/g,"");if(e.includes("(USA)")&&n==t)return!0}return!1}(e)&&(b[e].localization="NON-USA"),b[e].pageBlobs&&!["keys","integerMap"].includes(e)&&(b[e].pageCount=Object.keys(b[e].pageBlobs).length)})()})(await eu(t)),function(){let e=new Worker(f.webWorkersFolderPath+"/worker_for_store_files_in_idb.js"),t={worksheets:b,idbDatabaseVersion:f.idbDatabaseVersion};e.postMessage(t),e.onmessage=function(e){"status_update_from_web_worker"==e.data.type&&el(e.data.content),"confirm_transaction_complete"==e.data.type&&m.getState().updateValue(!1)},m.getState().updateValue(!0)}()};return(0,r.jsxs)("div",{children:[(0,r.jsx)(u,{isFilled:!1,functionToTrigger:()=>{if(!m.getState().aWorksheetProcessIsBusy)try{e.current.click()}catch(e){alert(e)}},disabled:t,className:"button-with-disabled-variant",useOnClick:!0,children:"\uD83D\uDCE4 Upload Worksheet Image Data"}),(0,r.jsx)("input",{type:"file",style:{display:"none"},ref:e,accept:".tar",onChange:n})]})}async function eu(e){el("Extracting images from tar file. This may take a minute...");let t=new FileReader,n={},r=0;return new Promise((o,s)=>{t.onload=function(e){untar(t.result).then(function(e){for(let t in e){let o=e[t].name.substring(e[t].name.lastIndexOf("/")+1);if(o.includes(".webp")){let s={name:o,blob:new Blob([e[t].blob],{type:"image/webp"}),size:e[t].size};n[o]=s,r++}else console.log("File not a webp image: "+o)}el(r+" images extracted. Storing worksheets in your browser's cache. This may take a minute..."),o(n)}).catch(s)},t.onerror=s,t.readAsArrayBuffer(e)})}function ep(){f.getGenericButtonStyle("primary");let e=m().aWorksheetProcessIsBusy;return(0,r.jsx)(u,{isFilled:!1,functionToTrigger:function(){if(!m.getState().aWorksheetProcessIsBusy&&confirm("Are you sure you want to clear all worksheet image data?")){let e;(e=indexedDB.open("worksheetDatabase",f.idbDatabaseVersion)).onupgradeneeded=function(e){e.target.result.createObjectStore("allWorksheets")},e.onsuccess=async function(e){e.target.result.transaction("allWorksheets","readwrite").objectStore("allWorksheets").clear()},el("Worksheet image data cleared.")}},disabled:e,className:"button-with-disabled-variant",children:"\uD83D\uDDD1️ Clear Worksheet Image Data"})}function eg(){let e=w().statusMessage;return(0,r.jsx)("p",{style:{whiteSpace:"pre-wrap",height:"30px"},children:e})}let eh={WorksheetViewer:(0,r.jsx)(function(){let{addWorksheetModalIsOpen:e}=j(),t=M(e=>e.userIsDraggingPages),n=ef(e=>e.madisonMode);return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexShrink:0,containerType:"size",cursor:t?"ew-resize":"default",backgroundColor:n?"#ffc6f3":"white"},id:"worksheetViewerDiv",children:[(0,r.jsx)(E,{}),(0,r.jsx)($,{}),e?(0,r.jsx)(P,{}):null]})},{}),SettingsPage:(0,r.jsx)(function(){let e=ef(e=>e.madisonMode),t=(0,r.jsx)(p,{buttonWidthString:"24px",iconWidthString:"14px",color:"black",onClickFunction:()=>{useSessionStateStore.getState().setCurrentPage("WorksheetViewer")},additionalStyleObject:{position:"absolute",top:"18px",right:"18px"}});return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",boxSizing:"border-box",padding:"16px",backgroundColor:e?"#ffc6f3":"white",position:"relative"},children:[(0,r.jsx)("h1",{children:"Settings"}),t,(0,r.jsx)(eg,{}),(0,r.jsx)(ec,{}),(0,r.jsx)("br",{}),(0,r.jsx)(ep,{}),(0,r.jsx)("br",{}),(0,r.jsx)(ed,{}),(0,r.jsx)("br",{}),(0,r.jsx)(ea,{})]})},{})},ex=c(e=>({openStudents:[{openWorksheets:[],type:"student",name:"Student 1",color:"green",notes:"",notesCopied:!1},{openWorksheets:[],type:"student",name:"Student 2",color:"green",notes:"",notesCopied:!1},{openWorksheets:[],type:"student",name:"Student 3",color:"green",notes:"",notesCopied:!1},{openWorksheets:[],type:"other",name:"Other",color:"none"}],numberInNameOfLastStudentAdded:3,setOpenStudents:t=>{e(()=>({openStudents:t})),ex.getState().saveToLocalStorage()},deleteOpenStudent:t=>{let n=ex.getState().currentWorksheet.openStudentIndex;if(n==t&&ex.getState().setCurrentWorksheet(null,null),null!==n&&n>t){let t={...ex.getState().currentWorksheet};t.openStudentIndex=n-1,e(()=>({currentWorksheet:t}))}let r=[...ex.getState().openStudents];r.splice(t,1),e(()=>({openStudents:r})),ex.getState().saveToLocalStorage()},addOpenStudentToBottom:(t,n)=>{let r=[...ex.getState().openStudents];r.splice(r.length-1,0,{openWorksheets:[],type:"student",name:t,color:n,notes:"",notesCopied:!1}),e(()=>({openStudents:r})),ex.getState().saveToLocalStorage()},currentPage:"WorksheetViewer",setCurrentPage:t=>{e(()=>({currentPage:t})),ex.getState().saveToLocalStorage()},currentWorksheet:{openStudentIndex:null,worksheetIndex:null},setCurrentWorksheet:(t,n)=>{if(e(()=>({currentWorksheet:{openStudentIndex:t,worksheetIndex:n}})),null==n||null==t)return;let{openStudents:r}=ex.getState(),o=r[t].openWorksheets[n].id;(void 0===b[o]||void 0===b[o].pageBlobs)&&S(o),ex.getState().saveToLocalStorage()},getCurrentWorksheetID:()=>{let{openStudents:e,currentWorksheet:t}=ex.getState();return null!==t.openStudentIndex&&null!==t.worksheetIndex&&void 0!==e[t.openStudentIndex].openWorksheets[t.worksheetIndex].id?e[t.openStudentIndex].openWorksheets[t.worksheetIndex].id:null},userIsMovingCurrentWorksheet:!1,setUserIsMovingCurrentWorksheet:t=>{e(()=>({userIsMovingCurrentWorksheet:t}))},userCanClickAnywhereToDisableMovingCurrentWorksheet:!1,setUserCanClickAnywhereToDisableMovingCurrentWorksheet:t=>{e(()=>({userCanClickAnywhereToDisableMovingCurrentWorksheet:t}))},currentPageOfWorksheet:0,setCurrentPageOfWorksheet:t=>{e(()=>({currentPageOfWorksheet:t}));let{openStudents:n,currentWorksheet:r}=ex.getState();null!==r.openStudentIndex&&null!==r.worksheetIndex&&(n[r.openStudentIndex].openWorksheets[r.worksheetIndex].pageLeftOff=t,e({openStudents:[...n]})),ex.getState().saveToLocalStorage()},allowArrowKeysForPageNavigation:!0,setAllowArrowKeysForPageNavigation:t=>{e(()=>({allowArrowKeysForPageNavigation:t}))},lastPointerInputWasTouch:!0,usePlaceholderImages:!1,saveToLocalStorage:()=>{let e=ex.getState(),t={openStudents:e.openStudents,currentPage:e.currentPage,currentWorksheet:e.currentWorksheet,currentPageOfWorksheet:e.currentPageOfWorksheet,numberInNameOfLastStudentAdded:e.numberInNameOfLastStudentAdded};localStorage.setItem("sessionState",JSON.stringify(t))},loadFromLocalStorage:()=>{let t=localStorage.getItem("sessionState");if(null!==t){let n=JSON.parse(t);e(()=>({openStudents:n.openStudents,currentPage:n.currentPage,currentWorksheet:n.currentWorksheet,currentPageOfWorksheet:n.currentPageOfWorksheet,numberInNameOfLastStudentAdded:n.numberInNameOfLastStudentAdded}));let r=ex.getState().getCurrentWorksheetID();null!=r&&S(r)}}})),ef=c(e=>({pageView:"double",setPageView:t=>{e(()=>({pageView:t}))},madisonMode:!1,setMadisonMode:t=>{e(()=>({madisonMode:t}))}}));function eb(){return 1!==window.visualViewport.scale}let eS=function(){let{userHasPinchZoomed:e}=y(),{pageView:t}=ef(),n={fontFamily:"Roboto, sans-serif",fontWeight:"normal",fontSize:"18px",height:"100%",width:"100%",maxWidth:"double"==t?"1500px":"1000px",color:f.nearBlackColor,margin:"0 auto"},o=ex(e=>e.currentPage);return"WorksheetViewer"==o&&(n.touchAction=e?"auto":"pinch-zoom"),(0,r.jsx)("div",{style:n,onClick:function(){if("WorksheetViewer"==o){let{userIsMovingCurrentWorksheet:e,userCanClickAnywhereToDisableMovingCurrentWorksheet:t}=ex.getState(),{userJustClickedMove:n}=k.getState();if(!n&&e&&t){let{setUserIsMovingCurrentWorksheet:e,setUserCanClickAnywhereToDisableMovingCurrentWorksheet:t}=ex.getState();e(!1),t(!1)}}},children:eh[o]})}},8067:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a,metadata:()=>l});var r=n(3002);n(2783);let o="/sam_browser/out",s=o+"/web_workers_for_ws_images",i=o+"/global.css",l={title:"WS Browser",description:""};function a({children:e}){return(0,r.jsxs)("html",{lang:"en",style:{height:"100%"},children:[(0,r.jsxs)("head",{children:[(0,r.jsx)("link",{rel:"stylesheet",href:i}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap",rel:"stylesheet"}),(0,r.jsx)("script",{src:s+"/untar.js"})]}),(0,r.jsx)("body",{style:{margin:"0 auto",height:"100%"},children:e})]})}},2202:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calcUserHasPinchZoomed:()=>o,default:()=>a,useSessionStateStore:()=>s,useUserSettingsStore:()=>i,worksheets:()=>l});var r=n(5002);let o=(0,r.registerClientReference)(function(){throw Error("Attempted to call calcUserHasPinchZoomed() from the server but calcUserHasPinchZoomed is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","calcUserHasPinchZoomed"),s=(0,r.registerClientReference)(function(){throw Error("Attempted to call useSessionStateStore() from the server but useSessionStateStore is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","useSessionStateStore"),i=(0,r.registerClientReference)(function(){throw Error("Attempted to call useUserSettingsStore() from the server but useUserSettingsStore is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","useUserSettingsStore"),l=(0,r.registerClientReference)(function(){throw Error("Attempted to call worksheets() from the server but worksheets is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","worksheets"),a=(0,r.registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\qwert\\\\Documents\\\\00_Coding\\\\sam_browser\\\\sam_browser\\\\app\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","default")}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[196],()=>n(5470));module.exports=r})();