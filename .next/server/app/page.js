(()=>{var e={};e.id=974,e.ids=[974],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5470:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=n(6186),o=n(6557),s=n(6437),i=n.n(s),l=n(4842),a={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);n.d(t,a);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,2202)),"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,7308)),"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,571,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,1430,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,5055,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js"],p={require:n,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8421:(e,t,n)=>{Promise.resolve().then(n.bind(n,2202))},1573:(e,t,n)=>{Promise.resolve().then(n.bind(n,8707))},7873:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6093,23)),Promise.resolve().then(n.t.bind(n,1101,23)),Promise.resolve().then(n.t.bind(n,6437,23)),Promise.resolve().then(n.t.bind(n,5364,23)),Promise.resolve().then(n.t.bind(n,956,23)),Promise.resolve().then(n.t.bind(n,3896,23)),Promise.resolve().then(n.t.bind(n,5567,23))},7201:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6417,23)),Promise.resolve().then(n.t.bind(n,3609,23)),Promise.resolve().then(n.t.bind(n,5678,23)),Promise.resolve().then(n.t.bind(n,7312,23)),Promise.resolve().then(n.t.bind(n,2608,23)),Promise.resolve().then(n.t.bind(n,7204,23)),Promise.resolve().then(n.t.bind(n,2019,23))},9457:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6604,23))},2609:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2288,23))},8707:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calcUserHasPinchZoomed:()=>Y,default:()=>K,useAllStudentsStore:()=>G,useSessionStateStore:()=>Z,useUserSettingsStore:()=>$,worksheets:()=>J});var r=n(5422),o=n(719),s=n.n(o);let i=e=>{let t;let n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,s={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,o,s);return s},l=e=>e?i(e):i,a=e=>e,d=e=>{let t=l(e),n=e=>(function(e,t=a){let n=o.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return o.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},c=e=>e?d(e):d;function p({children:e,onClickFunction:t,isFilled:n,isShort:o,additionalStyleObject:s}){let i=o?"10px":"14px",l={borderRadius:"200px",paddingTop:i,paddingBottom:i,paddingLeft:"24px",paddingRight:"24px",display:"flex",alignItems:"center",justifyContent:"center",border:n?"none":"1px solid #3d3d3d",backgroundColor:n?x.purpleColor:"white",color:n?"white":"#3d3d3d",fontFamily:"Roboto, sans-serif",fontWeight:500,fontSize:"16px",cursor:"pointer"};return s&&Object.assign(l,s),(0,r.jsx)("button",{style:l,onClick:t,children:e})}function u({buttonWidthString:e,iconWidthString:t,color:n,onClickFunction:o,additionalStyleObject:s}){let i={background:"none",border:"none",cursor:"pointer",width:e,height:e,padding:"0px",verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"};return s&&Object.assign(i,s),(0,r.jsx)("button",{style:i,onClick:o,children:(0,r.jsx)("img",{src:`${x.iconsFolderPath}/close_${n}.svg`,alt:"Close",style:{width:t,height:t}})})}function h({widthSetting:e,heightSetting:t,children:n,additionalStyleObject:o}){let s={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:e,height:t,backgroundColor:"white",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.45)",zIndex:1,overflow:"auto",padding:"34px",borderRadius:"24px"};return o&&Object.assign(s,o),(0,r.jsx)("div",{style:s,children:n})}let g="/sam_browser/out",x={softBorderColor:"#A9A09E",redColor:"#C56D61",purpleColor:"#55587B",nearBlackColor:"#3d3d3d",worksheetSelectionPanelWidth:"240px",colorMap:{red:"#BD1452",orange:"#FE9350",yellow:"#FFFB79",green:"#91D480",cyan:"#70D9FF",blue:"#2D4CA8",purple:"#8B2F99",pink:"#FF9FDC"},getGenericButtonStyle:function(e){return{padding:"10px",borderRadius:"8px",cursor:"pointer",borderColor:"black",borderStyle:"solid",...{primary:{backgroundColor:"black",color:"white",border:"none"},secondary:{backgroundColor:"white",color:"black"},tertiary:{backgroundColor:"transparent",color:"black",border:"none"}}[e]}},webWorkersFolderPath:g+"/web_workers_for_ws_images",iconsFolderPath:g+"/icons",idbDatabaseVersion:1},b=c(e=>({aWorksheetProcessIsBusy:!1,updateValue:t=>{e(()=>({aWorksheetProcessIsBusy:t}))}})),f=c(e=>({statusMessage:"Retrieving worksheet data from your device...",setStatusMessage:t=>{e(()=>({statusMessage:t}))}})),m=c(e=>({userHasPinchZoomed:!1,setUserHasPinchZoomed:t=>{e(()=>({userHasPinchZoomed:t}))}})),w=c(e=>({addWorksheetModalIsOpen:!1,setAddWorksheetModalIsOpen:t=>{e(()=>({addWorksheetModalIsOpen:t}))}}));function S(){return(0,r.jsx)(h,{widthSetting:"90%",heightSetting:"90%",additionalStyleObject:{boxSizing:"border-box"},children:(0,r.jsxs)("div",{width:"100%",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("h1",{style:{fontFamily:"Roboto, sans-serif",fontSize:"18px",fontWeight:"normal",margin:"0"},children:"Add Worksheet"}),(0,r.jsx)(u,{buttonWidthString:"37px",iconWidthString:"22px",color:"black",onClickFunction:function(){w.setState({addWorksheetModalIsOpen:!1})},additionalStyleObject:{top:"10px",right:"10px"}})]})})}let k=c(e=>({pagesAreHidden:!1,setPagesAreHidden:t=>e({pagesAreHidden:t})}));function y(){let e=b().aWorksheetProcessIsBusy,t=f().statusMessage,{pageView:n}=$(),o=null,s={width:"100%",height:"100%",containerType:"size",boxSizing:"border-box",display:"flex"};return e?o=(0,r.jsx)("div",{id:"wrapper-for-both-pages",style:s,children:(0,r.jsx)("p",{children:t})}):("double"==n&&(o=(0,r.jsxs)("div",{id:"wrapper-for-both-pages",style:s,children:[(0,r.jsx)("div",{id:"wrapper-for-single-page",style:{position:"relative",width:"50%",marginRight:"16px",height:"100%"},children:(0,r.jsx)(v,{isLeftOrRight:"left"})}),(0,r.jsx)("div",{id:"wrapper-for-single-page",style:{position:"relative",width:"50%",height:"100%"},children:(0,r.jsx)(v,{isLeftOrRight:"right"})})]})),"single"==n&&(o=(0,r.jsx)("div",{id:"wrapper-for-both-pages",style:s,children:(0,r.jsx)("div",{id:"wrapper-for-single-page",style:{position:"relative",width:"100%",height:"100%"},children:(0,r.jsx)(v,{isLeftOrRight:"left"})})}))),(0,r.jsxs)("div",{style:{flexGrow:1,flexBasis:"0%",height:"100%",padding:"16px",paddingRight:"8px",boxSizing:"border-box",display:"flex",flexDirection:"column",containerType:"size"},children:[o,(0,r.jsx)(j,{})]})}function j(){let{pageView:e}=$(),t=x.iconsFolderPath+("single"==e?"/single_page_view.svg":"/two_page_view.svg"),n=(0,r.jsx)(p,{isFilled:!0,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 24px)",paddingRight:"min(1.5vw, 24px)",minWidth:"45px"},onClickFunction:function(){let{pageView:e,setPageView:t}=$.getState(),n="double"==e?"single":"double";t(n);let{currentPageOfWorksheet:r,setCurrentPageOfWorksheet:o}=Z.getState(),s=r;"single"==n&&0==s&&(s=1),"double"==n&&s%2==1&&s--,o(s)},children:(0,r.jsx)("img",{src:t,alt:"Toggle Page View"})}),o=(0,r.jsxs)(p,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 24px)",paddingRight:"min(1.5vw, 24px)"},onClickFunction:O,children:[(0,r.jsx)("p",{style:{margin:"0",padding:"0",marginRight:"10px",fontSize:"min(1.6vw, 16px)",textWrap:"nowrap"},children:"Move"}),(0,r.jsx)("img",{src:x.iconsFolderPath+"/move.svg",alt:"Move",style:{width:"19px",height:"15px"}})]}),s=(0,r.jsxs)(p,{isFilled:!0,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 24px)",paddingRight:"min(1.5vw, 24px)",zIndex:"2"},onClickFunction:()=>{console.log("log worksheet button clicked")},children:[(0,r.jsx)("p",{style:{margin:"0",padding:"0",marginRight:"14px",fontSize:"min(1.6vw, 16px)",textWrap:"nowrap"},children:"Log worksheet"}),(0,r.jsx)("img",{src:x.iconsFolderPath+"/arrow_up.svg",alt:"Expand",style:{width:"14px",height:"7px"}})]}),{pagesAreHidden:i}=k(),l=(0,r.jsx)(p,{isFilled:!0,isShort:!0,additionalStyleObject:{paddingLeft:"min(2vw, 30px)",paddingRight:"min(2vw, 30px)"},onClickFunction:function(){let{pagesAreHidden:e,setPagesAreHidden:t}=k.getState();t(!e)},children:i?(0,r.jsx)("img",{id:"toggle-hidden",src:x.iconsFolderPath+"/hidden.svg",alt:"Toggle visibility"}):(0,r.jsx)("img",{id:"toggle-visible",src:x.iconsFolderPath+"/visible.svg",alt:"Toggle visibility"})}),a=function(e){let{currentPageOfWorksheet:t,setCurrentPageOfWorksheet:n,getCurrentWorksheetID:r}=Z.getState();if(null==r())return;let{pageView:o}=$.getState(),s="single"==o?1:2,i=r(),l=t;"prev"==e&&(l-=s),"next"==e&&(l+=s);let a="single"==o?1:0,d=J[i].pageCount;"double"==o&&d%2==1&&(d-=1),l<a&&(l=a),l>d&&(l=d),n(l)},d=(0,r.jsx)(p,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(2vw, 30px)",paddingRight:"min(2vw, 30px)",zIndex:"2"},onClickFunction:()=>{a("prev")},children:(0,r.jsx)("img",{src:x.iconsFolderPath+"/arrow_left.svg",alt:"Previous Page",style:{width:"15px",height:"20px"}})}),c=(0,r.jsx)(p,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(2vw, 30px)",paddingRight:"min(2vw, 30px)",zIndex:"2"},onClickFunction:()=>{a("next")},children:(0,r.jsx)("img",{src:x.iconsFolderPath+"/arrow_right.svg",alt:"Next Page",style:{width:"15px",height:"20px"}})}),u={display:"flex",gap:"8px"};return(0,r.jsxs)("div",{style:{paddingTop:"16px",display:"flex",gap:"8px",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{style:u,children:[n,l,o,s]}),(0,r.jsxs)("div",{style:u,children:[d,c]})]})}function v({isLeftOrRight:e}){let{currentPageOfWorksheet:t,getCurrentWorksheetID:n}=Z(),o="left"==e?t:t+1,s=null,i=n();return i&&(J[i]?J[i].pageBlobs[o]&&(s=J[i].pageBlobs[o]):s="worksheet_not_available"),(0,r.jsxs)("div",{style:{position:"absolute",inset:0,marginLeft:"auto",maxHeight:"100%",aspectRatio:"496 / 702"},children:[(0,r.jsx)(_,{pageImageBlob:s}),(0,r.jsx)(C,{isLeftOrRight:e,pageNumber:o,pageExists:null===s})]})}function C({isLeftOrRight:e,pageNumber:t,pageExists:n}){let o={position:"absolute",bottom:"15px",width:"44px",height:"44px",backgroundColor:"white",borderRadius:"4px",border:"1px solid #3D3D3D",justifyContent:"center",alignItems:"center",fontSize:"18px",display:n?"none":"flex"};return o[e]="15px",(0,r.jsx)("div",{style:o,children:t})}function _({pageImageBlob:e}){let t={width:"100%",height:"100%",border:"1px solid #A9A09E",borderRadius:"12px",backgroundColor:"white",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",boxSizing:"border-box"},{pagesAreHidden:n}=k();if(null===e||n)return(0,r.jsx)("div",{style:t});if("worksheet_not_available"===e)return(0,r.jsxs)("div",{style:t,children:[(0,r.jsx)("p",{style:{fontSize:"14px",textWrap:"balance",textAlign:"center"},children:"Error"}),(0,r.jsx)("p",{style:{fontSize:"14px",textWrap:"balance",textAlign:"center"},children:"It appears this worksheet is not downloaded to your system."})]});let o=URL.createObjectURL(e);return(0,r.jsx)("img",{src:o,style:t})}function P(){let e={width:x.worksheetSelectionPanelWidth,height:"100%",padding:"16px",paddingLeft:"8px",boxSizing:"border-box",overflowY:"scroll",containerType:"size"},t=Z().openStudents;return(0,r.jsxs)("div",{style:{height:"100%",flexGrow:0,flexBasis:"0%",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)("div",{style:e,children:[t.map((e,t)=>(0,r.jsx)(I,{studentIDNumber:e.studentIDNumber},e.studentIDNumber)),(0,r.jsx)(U,{})]}),(0,r.jsx)(W,{})]})}function W(){let e=(0,r.jsx)(p,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 24px)",paddingRight:"min(1.5vw, 24px)"},onClickFunction:()=>{console.log("view log button clicked")},children:(0,r.jsx)("p",{style:{margin:"0",padding:"0",fontSize:"min(1.6vw, 16px)",textWrap:"nowrap"},children:"View log"})}),t=(0,r.jsx)(p,{isFilled:!1,isShort:!0,additionalStyleObject:{paddingLeft:"min(1.5vw, 30px)",paddingRight:"min(1.5vw, 30px)"},onClickFunction:()=>{Z.getState().setCurrentPage("SettingsPage")},children:(0,r.jsx)("img",{src:x.iconsFolderPath+"/settings.svg",alt:"Settings",style:{width:"23px",height:"23px"}})});return(0,r.jsxs)("div",{style:{paddingTop:"16px",display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"16px",marginRight:"16px",borderTop:"1px solid #A9A09E"},children:[e,t]})}function I({studentIDNumber:e}){let{allStudents:t}=G.getState(),{openStudents:n}=Z.getState(),o=t[e];return(0,r.jsxs)("div",{style:{width:"100%",backgroundColor:"white",borderRadius:"12px",boxShadow:"0px 1px 2px rgba(0, 0, 0, 0.45)",boxSizing:"border-box",marginBottom:"12px",overflow:"hidden",position:"relative"},children:[(0,r.jsx)(M,{studentName:o.name,studentIDNumber:e}),(0,r.jsx)(D,{studentIDNumber:e}),(0,r.jsx)(R,{studentIDNumber:e})]})}function F(e){let t=Z.getState().openStudents;return{thisStudent:t.filter(t=>t.studentIDNumber==e)[0],thisStudentIndex:t.findIndex(t=>t.studentIDNumber==e)}}function D({studentIDNumber:e}){let{allStudents:t}=G.getState(),{openStudents:n,currentWorksheet:o}=Z(),{thisStudent:s,thisStudentIndex:i}=F(e),l=[];for(let e=0;e<s.openWorksheets.length;e++){let t=s.openWorksheets[e].id,n=o.openStudentIndex==i&&o.worksheetIndex==e,a=function(){let{setCurrentWorksheet:t,setUserIsMovingCurrentWorksheet:n,setCurrentPageOfWorksheet:r,openStudents:o}=Z.getState(),{pageView:s}=$.getState();t(i,e),n(!1);let l=o[i].openWorksheets[e].pageLeftOff;"single"==s&&0==l&&(l=1),"double"==s&&l%2==1&&l--,r(l)};l.push((0,r.jsx)(A,{worksheetID:t,isCurrentWorksheet:n,onClick:a},t))}return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",padding:"10px 4px",overflowY:"auto",height:"100%"},children:l})}function A({worksheetID:e,isCurrentWorksheet:t,onClick:n}){let o={fontFamily:"Roboto, sans-serif",fontWeight:"normal",fontSize:"12px",border:"none",backgroundColor:"white",padding:"6px",cursor:t?"arrow":"pointer",textAlign:"left",width:"100%",borderRadius:"12px",color:"inherit",boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"center"},s=e.slice(0,-3);return t?(o.backgroundColor="#55587B26",(0,r.jsxs)("div",{style:o,children:[(0,r.jsx)("p",{style:{margin:0,whiteSpace:t?"normal":"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexShrink:1},children:s}),(0,r.jsx)("div",{style:{display:"flex"},children:(0,r.jsx)(u,{buttonWidthString:"24px",iconWidthString:"14px",color:"black",onClickFunction:function(){let e=Z.getState().currentWorksheet;Z.getState().openStudents[e.openStudentIndex].openWorksheets.splice(e.worksheetIndex,1),Z.getState().setCurrentWorksheet(null,null),Z.getState().setUserIsMovingCurrentWorksheet(!1)},additionalStyleObject:{flexShrink:0}})})]})):(0,r.jsx)("button",{style:o,onClick:n,children:s})}function O(){let{userIsMovingCurrentWorksheet:e,setUserIsMovingCurrentWorksheet:t,setUserCanClickAnywhereToDisableMovingCurrentWorksheet:n}=Z.getState();e||n(!0),t(!e)}function R({studentIDNumber:e}){let t={backgroundColor:"white",border:`2px solid ${x.softBorderColor}`,borderRadius:"50%",cursor:"pointer",width:"40px",height:"40px",verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"center"};return(0,r.jsxs)("div",{style:{backgroundColor:"none",padding:"14px 14px",paddingTop:"0px",justifyContent:"space-between",alignItems:"center",display:"flex"},children:[(0,r.jsx)(B,{styleObject:t,studentIDNumber:e}),(0,r.jsx)(z,{styleObject:t,studentIDNumber:e})]})}function B({studentIDNumber:e,styleObject:t}){return(0,r.jsx)("button",{style:t,children:(0,r.jsx)("img",{src:x.iconsFolderPath+"/timer.svg",alt:"Start timer",style:{width:"23px",height:"23px"}})})}function z({studentIDNumber:e,styleObject:t}){return(0,r.jsx)("button",{style:t,onClick:function(){w.getState().setAddWorksheetModalIsOpen(!0),console.log("Add worksheet for "+e)},children:(0,r.jsx)("img",{src:x.iconsFolderPath+"/add_black.svg",alt:"Add worksheet",style:{width:"16px",height:"16px"}})})}function U(){return(0,r.jsxs)(p,{isFilled:!0,isShort:!0,onClickFunction:()=>{console.log("Add student")},additionalStyleObject:{margin:"0 auto",paddingLeft:"30px",paddingRight:"30px"},children:[(0,r.jsx)("img",{src:x.iconsFolderPath+"/add_white.svg",alt:"Add student",style:{width:"12px",height:"12px",marginRight:"8px"}}),(0,r.jsx)("p",{style:{margin:"0",padding:"0"},children:"Add Student"})]})}function M({studentName:e,studentIDNumber:t}){let{allStudents:n}=G.getState(),{userIsMovingCurrentWorksheet:o,openStudents:s,currentWorksheet:i}=Z.getState(),l=n[t],a={display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:x.redColor,padding:"6px 10px","--original-bg-color":x.redColor,cursor:o?"pointer":"default"},d={width:"18px",height:"18px",borderRadius:"50%",backgroundColor:x.colorMap[l.color],marginRight:"10px"};return(0,r.jsxs)("div",{style:a,className:o?"pulsatingHeader":null,onClick:o?function(){let{thisStudentIndex:e}=F(t),{setOpenStudents:n,setCurrentWorksheet:r}=Z.getState();if(e!==i.openStudentIndex){let t=[...s];t[e].openWorksheets.push(s[i.openStudentIndex].openWorksheets[i.worksheetIndex]),s[i.openStudentIndex].openWorksheets.splice(i.worksheetIndex,1),n(t),r(e,t[e].openWorksheets.length-1)}}:null,children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("div",{style:d}),(0,r.jsx)("h1",{style:{margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"white",fontWeight:"normal",fontSize:"12px"},children:e})]}),o?null:(0,r.jsx)(u,{buttonWidthString:"24px",iconWidthString:"14px",color:"white",onClickFunction:()=>{let{deleteOpenStudent:e}=Z.getState();e(t)}})]})}function L(e){f.getState().setStatusMessage(e)}function N(){let e=x.getGenericButtonStyle("primary"),t=s().useRef(null),n=b().aWorksheetProcessIsBusy,o=async function(e){if(0===e.target.files.length)return;let t=e.target.files[0];(function(e){for(let t in e){let n=t.split("_-")[0],r=Number(t.split("_-")[1].split(".")[0]);if(J[n])J[n].pageBlobs[r]=e[t].blob;else{let o={};o[r]=e[t].blob,J[n]={pageBlobs:o,is_old:t.includes("(OLD)"),localization:t.includes("(USA)")?"USA":"only",pageCount:"unknown"}}}(function(){for(let e in J)"only"==J[e].localization&&function(e){let t=e.replace(/\D/g,"");for(let e in J){let n=e.replace(/\D/g,"");if(e.includes("(USA)")&&n==t)return!0}return!1}(e)&&(J[e].localization="NON-USA"),J[e].pageCount=Object.keys(J[e].pageBlobs).length})()})(await V(t)),function(){let e=new Worker(x.webWorkersFolderPath+"/worker_for_store_files_in_idb.js"),t={worksheets:J,idbDatabaseVersion:x.idbDatabaseVersion};e.postMessage(t),e.onmessage=function(e){"status_update_from_web_worker"==e.data.type&&L(e.data.content),"confirm_transaction_complete"==e.data.type&&b.getState().updateValue(!1)},b.getState().updateValue(!0)}()};return(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{style:e,onClick:()=>{n||t.current.click()},disabled:n,className:"button-with-disabled-variant",children:"Upload Worksheet Image Data"}),(0,r.jsx)("input",{type:"file",style:{display:"none"},ref:t,accept:".tar",onChange:o})]})}async function V(e){L("Extracting images from tar file...");let t=new FileReader,n={},r=0;return new Promise((o,s)=>{t.onload=function(e){untar(t.result).then(function(e){for(let t in e){let o=e[t].name.substring(e[t].name.lastIndexOf("/")+1);if(o.includes(".webp")){let s={name:o,blob:new Blob([e[t].blob],{type:"image/webp"}),size:e[t].size};n[o]=s,r++}else console.log("File not a webp image: "+o)}L(r+" images extracted. Storing worksheets on your device..."),o(n)}).catch(s)},t.onerror=s,t.readAsArrayBuffer(e)})}function E(){let e=x.getGenericButtonStyle("primary"),t=b().aWorksheetProcessIsBusy;return(0,r.jsx)("button",{style:e,onClick:function(){t||function(e){b.getState().updateValue(!0);let t=new Worker(x.webWorkersFolderPath+"/worker_for_retrieve_files_from_idb.js"),n={idbDatabaseVersion:x.idbDatabaseVersion};t.postMessage(n),t.onmessage=function(e){if("status_update_from_web_worker"==e.data.type&&L(e.data.content),"worksheets_from_idb"==e.data.type){for(let e in J)J.hasOwnProperty(e)&&delete J[e];Object.assign(J,e.data.content),window.worksheets=J,b.getState().updateValue(!1)}}}(0)},disabled:t,className:"button-with-disabled-variant",children:"Retrieve Worksheet Image Data"})}function T(){let e=x.getGenericButtonStyle("primary"),t=b().aWorksheetProcessIsBusy;return(0,r.jsx)("button",{style:e,onClick:function(){let e;t||((e=indexedDB.open("worksheetDatabase",x.idbDatabaseVersion)).onupgradeneeded=function(e){e.target.result.createObjectStore("allWorksheets")},e.onsuccess=async function(e){e.target.result.transaction("allWorksheets","readwrite").objectStore("allWorksheets").clear()},L("Worksheet image data cleared."))},disabled:t,className:"button-with-disabled-variant",children:"Clear Worksheet Image Data"})}function q(){let e=f().statusMessage;return(0,r.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:e})}let H={WorksheetViewer:(0,r.jsx)(function(){let{addWorksheetModalIsOpen:e}=w();return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexShrink:0,containerType:"size"},children:[(0,r.jsx)(y,{}),(0,r.jsx)(P,{}),e?(0,r.jsx)(S,{}):null]})},{}),SettingsPage:(0,r.jsx)(function(){let e=(0,r.jsx)(u,{buttonWidthString:"24px",iconWidthString:"14px",color:"black",onClickFunction:()=>{useSessionStateStore.getState().setCurrentPage("WorksheetViewer")},additionalStyleObject:{position:"absolute",top:"18px",right:"18px"}});return(0,r.jsxs)("div",{style:{width:"100%",height:"100%",boxSizing:"border-box",padding:"16px"},children:[(0,r.jsx)("h1",{children:"Settings"}),e,(0,r.jsx)(N,{}),(0,r.jsx)("br",{}),(0,r.jsx)(E,{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(T,{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(q,{})]})},{})},G=c(function(e){let t=function(){let e=localStorage.getItem("allStudents");return null!==e?{allStudents:JSON.parse(e)}:{allStudents:{}}};return{allStudents:{},initAllStudents:()=>{e(t)},setAllStudents:t=>{e({allStudents:t})}}});G.getState().setAllStudents({1:{name:"Sidon",color:"pink"},2:{name:"Yunobo",color:"purple"},3:{name:"Tulin",color:"blue"}});let Z=c(e=>({openStudents:[{openWorksheets:[{id:"(OLD) 03.01-05 HF (USA) 1-1 WS",pageLeftOff:0},{id:"(OLD) 03.06-12 TP (USA) 1-1 WS",pageLeftOff:0}],studentIDNumber:"1"},{openWorksheets:[],studentIDNumber:"2"}],setOpenStudents:t=>{e(()=>({openStudents:t}))},deleteOpenStudent:t=>{let n=Z.getState().openStudents.filter(e=>e.studentIDNumber!==t);e(()=>({openStudents:n}))},addOpenStudentToBottom:t=>{let n=Z.getState().openStudents.concat({openWorksheets:[],studentIDNumber:t});e(()=>({openStudents:n}))},currentPage:"WorksheetViewer",setCurrentPage:t=>{e(()=>({currentPage:t}))},currentWorksheet:{openStudentIndex:null,worksheetIndex:null},setCurrentWorksheet:(t,n)=>{e(()=>({currentWorksheet:{openStudentIndex:t,worksheetIndex:n}}))},getCurrentWorksheetID:()=>{let{openStudents:e,currentWorksheet:t}=Z.getState();return null===t.openStudentIndex||null===t.worksheetIndex?null:e[t.openStudentIndex].openWorksheets[t.worksheetIndex].id},userIsMovingCurrentWorksheet:!1,setUserIsMovingCurrentWorksheet:t=>{e(()=>({userIsMovingCurrentWorksheet:t}))},userCanClickAnywhereToDisableMovingCurrentWorksheet:!1,setUserCanClickAnywhereToDisableMovingCurrentWorksheet:t=>{e(()=>({userCanClickAnywhereToDisableMovingCurrentWorksheet:t}))},currentPageOfWorksheet:0,setCurrentPageOfWorksheet:t=>{e(()=>({currentPageOfWorksheet:t}));let{openStudents:n,currentWorksheet:r}=Z.getState();null!==r.openStudentIndex&&null!==r.worksheetIndex&&(n[r.openStudentIndex].openWorksheets[r.worksheetIndex].pageLeftOff=t,e({openStudents:[...n]}))}})),$=c(e=>({pageView:"double",setPageView:t=>{e(()=>({pageView:t}))}}));function Y(){return 1!==window.visualViewport.scale}let J={},K=function(){let{userHasPinchZoomed:e}=m(),{pageView:t}=$(),n={fontFamily:"Roboto, sans-serif",fontWeight:"normal",fontSize:"18px",height:"100%",width:"100%",maxWidth:"double"==t?"1500px":"1000px",color:x.nearBlackColor,touchAction:e?"auto":"pinch-zoom",margin:"0 auto"},o=Z(),s=o.currentPage;return(0,r.jsx)("div",{style:n,onClick:function(){"WorksheetViewer"==s&&o.userIsMovingCurrentWorksheet&&o.userCanClickAnywhereToDisableMovingCurrentWorksheet&&(o.setUserIsMovingCurrentWorksheet(!1),o.setUserCanClickAnywhereToDisableMovingCurrentWorksheet(!1))},children:H[s]})}},7308:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a,metadata:()=>l});var r=n(3002);n(2783);let o="/sam_browser/out",s={softBorderColor:"#A9A09E",hardBorderColor:"#000000",redColor:"#C56D61",purpleColor:"#55587B",nearBlackColor:"#3d3d3d",worksheetSelectionPanelWidth:"240px",colorMap:{red:"#BD1452",orange:"#FE9350",yellow:"#FFFB79",green:"#91D480",cyan:"#70D9FF",blue:"#2D4CA8",purple:"#8B2F99",pink:"#FF9FDC"},getGenericButtonStyle:function(e){return{padding:"10px",borderRadius:"8px",cursor:"pointer",borderColor:"black",borderStyle:"solid",...{primary:{backgroundColor:"black",color:"white",border:"none"},secondary:{backgroundColor:"white",color:"black"},tertiary:{backgroundColor:"transparent",color:"black",border:"none"}}[e]}},CloseButton:function({buttonWidthString:e,iconWidthString:t,color:n,onClickFunction:o,additionalStyleObject:i}){let l={background:"none",border:"none",cursor:"pointer",width:e,height:e,padding:"0px",verticalAlign:"middle",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"};return i&&Object.assign(l,i),(0,r.jsx)("button",{style:l,onClick:o,children:(0,r.jsx)("img",{src:`${s.iconsFolderPath}/close_${n}.svg`,alt:"Close",style:{width:t,height:t}})})},useBasePath:!0,basePathToUse:o,webWorkersFolderPath:o+"/web_workers_for_ws_images",iconsFolderPath:o+"/icons",idbDatabaseVersion:1},i=(s.useBasePath?s.basePathToUse:"")+"/global.css",l={title:"SAM Browser",description:""};function a({children:e}){return(0,r.jsxs)("html",{lang:"en",style:{height:"100%"},children:[(0,r.jsxs)("head",{children:[(0,r.jsx)("link",{rel:"stylesheet",href:i}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap",rel:"stylesheet"}),(0,r.jsx)("script",{src:s.webWorkersFolderPath+"/untar.js"})]}),(0,r.jsx)("body",{style:{margin:"0 auto",height:"100%"},children:e})]})}},2202:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calcUserHasPinchZoomed:()=>o,default:()=>d,useAllStudentsStore:()=>s,useSessionStateStore:()=>i,useUserSettingsStore:()=>l,worksheets:()=>a});var r=n(5002);let o=(0,r.registerClientReference)(function(){throw Error("Attempted to call calcUserHasPinchZoomed() from the server but calcUserHasPinchZoomed is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","calcUserHasPinchZoomed"),s=(0,r.registerClientReference)(function(){throw Error("Attempted to call useAllStudentsStore() from the server but useAllStudentsStore is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","useAllStudentsStore"),i=(0,r.registerClientReference)(function(){throw Error("Attempted to call useSessionStateStore() from the server but useSessionStateStore is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","useSessionStateStore"),l=(0,r.registerClientReference)(function(){throw Error("Attempted to call useUserSettingsStore() from the server but useUserSettingsStore is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","useUserSettingsStore"),a=(0,r.registerClientReference)(function(){throw Error("Attempted to call worksheets() from the server but worksheets is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","worksheets"),d=(0,r.registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\qwert\\\\Documents\\\\00_Coding\\\\sam_browser\\\\sam_browser\\\\app\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\qwert\\Documents\\00_Coding\\sam_browser\\sam_browser\\app\\page.js","default")}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[196],()=>n(5470));module.exports=r})();